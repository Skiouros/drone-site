// Generated by CoffeeScript 1.7.1
(function() {
  var root, setupMap, setupModals, setupSideBar;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  $(document).ready(function() {
    setupMap();
    setupSideBar();
    $.extend(true, $.magnificPopup.defaults, {
      removalDelay: 300,
      mainClass: "my-mfp-zoom-in",
      type: "ajax",
      closeOnContentClick: false,
      fixedContentPos: true
    });
    return setupModals();
  });

  setupMap = function() {
    var mapCanvas, mapOptions;
    mapCanvas = document.getElementById('map-canvas');
    mapOptions = {
      center: new google.maps.LatLng(44.8281, -98.5463),
      zoom: 6,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    root.map = new google.maps.Map(mapCanvas, mapOptions);
    root.codeAddress = function() {
      var address;
      address = $("#address").val();
      console.log(address);
      root.geocoder = new google.maps.Geocoder();
      return geocoder.geocode({
        address: address
      }, function(results, status) {
        if (status === google.maps.GeocoderStatus.OK) {
          return map.setCenter(results[0].geometry.location);
        } else {
          return console.log("Geocode was not succesful: " + status);
        }
      });
    };
    return $(".search").submit(function(e) {
      e.preventDefault();
      return codeAddress();
    });
  };

  setupSideBar = function() {
    var switchTab, tab, tabs, _i, _len;
    tabs = ["latest", "editors", "popular", "favourites"];
    switchTab = function() {
      var tab, _i, _j, _len, _len1;
      for (_i = 0, _len = tabs.length; _i < _len; _i++) {
        tab = tabs[_i];
        $(".drone-list." + tab).hide();
      }
      $(".drone-list." + this.id).show();
      for (_j = 0, _len1 = tabs.length; _j < _len1; _j++) {
        tab = tabs[_j];
        $("\#" + tab).attr("class", "");
      }
      return $(this).attr("class", "active");
    };
    for (_i = 0, _len = tabs.length; _i < _len; _i++) {
      tab = tabs[_i];
      $("\#" + tab).click(switchTab);
    }
    return $('#menu-trigger').click(function(e) {
      e.preventDefault();
      return $("body").toggleClass("menu-active");
    });
  };

  setupModals = function() {
    $("#contact").magnificPopup({
      items: {
        src: "/static/pages/contact_us.html"
      },
      type: "ajax"
    });
    $("#about").magnificPopup({
      items: {
        src: "/static/pages/about_us.html"
      },
      type: "ajax"
    });
    $("#login").magnificPopup({
      items: {
        src: "/static/users/login.html"
      },
      type: "ajax"
    });
    return $("#add_drone").magnificPopup({
      items: {
        src: "/static/drones/add.html"
      },
      type: "ajax"
    });
  };

}).call(this);
